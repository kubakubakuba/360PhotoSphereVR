<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>360° VR Photo Sphere Viewer</title>
	<link rel="stylesheet" href="./style.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@photo-sphere-viewer/core@5/index.css">
</head>
<body>
	<div class="header">
		<h1>360° VR Photo Sphere Viewer</h1>
		<p class="subtitle">Immersive Experience for Oculus Quest and WebXR Devices</p>
	</div>
	
	<div class="container">
		<div class="viewer-container">
			<div id="panorama-viewer"></div>
			
			<div id="viewer" style="display: none;"></div>
			
			<div class="loading" id="vr-loading">
				<div class="spinner"></div>
				<div class="loading-text" id="loading-text">Preparing VR Experience</div>
				<div class="progress-container">
					<div class="progress-bar" id="progress-bar"></div>
				</div>
			</div>
		</div>
		
		<div class="controls">
			<div class="control-group">
				<h2>VR Controls</h2>
				<button id="enter-vr" class="btn btn-vr">
					<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 10px;">
						<path d="M12 4C7.58 4 4 7.58 4 12s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"/>
					</svg>
					Enter VR Mode
				</button>
				<button id="exit-vr" class="btn btn-exit" disabled>
					<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 10px;">
						<path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
					</svg>
					Exit VR Mode
				</button>
				
				<div class="status">
					<span class="status-indicator" id="xr-status-indicator"></span>
					<span id="xr-status">Checking WebXR support...</span>
				</div>
			</div>
			
			<div class="control-group">
				<h2>System Status</h2>
				<div class="status">
					<span class="status-indicator" id="renderer-status-indicator"></span>
					<span id="renderer-status">Initializing renderer...</span>
				</div>
				<div class="status">
					<span class="status-indicator" id="session-status-indicator"></span>
					<span id="session-status">No active VR session</span>
				</div>
				<div class="status">
					<span class="status-indicator" id="camera-status-indicator"></span>
					<span id="camera-status">Camera Orientation: Not active</span>
				</div>
				
				<div class="reference-space" id="reference-space">
					Reference Space: Not set
				</div>
			</div>
			
			<div class="control-group">
				<h2>Instructions</h2>
				<div class="instructions">
					<p>Click and drag to explore the 360° panorama.</p>
					<p>Use mouse wheel to zoom in/out.</p>
					<p>Click "Enter VR Mode" to start the VR experience.</p>
					<p>Move your head to look around in VR.</p>
					<p>Ensure your device supports WebXR for VR.</p>
					<p>Requires HTTPS connection for VR functionality.</p>
					<p><strong>When in VR, use Left/Right arrow keys to rotate the panorama.</strong></p>
					<p>You can load a custom panorama by adding <code>#panorama=IMAGE_URL</code> to the address bar.</p>
				</div>
			</div>
		</div>
	</div>
	
	<div class="footer">
		<p>Photo Sphere Viewer VR Experience | Compatible with Oculus Quest and other WebXR devices</p>
	</div>

	<script type="importmap">
		{
			"imports": {
				"three": "https://cdn.jsdelivr.net/npm/three/build/three.module.js",
				"@photo-sphere-viewer/core": "https://cdn.jsdelivr.net/npm/@photo-sphere-viewer/core@5/index.module.js"
			}
		}
	</script>

	<script type="module" src="app.js"></script>
</body>
</html>